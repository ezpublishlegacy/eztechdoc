#. `eZ Publish Platform 5.x <index.html>`__
#. `eZ Publish Platform
   Documentation <eZ-Publish-Platform-Documentation_1114149.html>`__
#. `Developer Cookbook <Developer-Cookbook_11403951.html>`__
#. `eZ Publish 5 Field Type
   Tutorial <eZ-Publish-5-Field-Type-Tutorial_19890704.html>`__
#. `The bundle <The-bundle_19890857.html>`__

eZ Publish Platform 5.x : Creating the bundle
=============================================

Created by bertrand.dunogier@ez.no, last modified by damien.pobel@ez.no
on Jun 20, 2014

Custom FieldTypes follow the Symfony 2 extension mechanism:
`bundles <http://symfony.com/doc/current/cookbook/bundles/index.html>`__.
We can get started with a bundle using the built-in Symfony 2 bundle
generator.

Generating the bundle
~~~~~~~~~~~~~~~~~~~~~

From the eZ  Publish 5 root, run the following:

.. code:: theme:

    php ezpublish/console generate:bundle

First, we are asked for the namespace. As the vendor, we will use
EzSystems as the root namespace. This must of course be changed to
whatever identifies you as a vendor (your name, company name, etc). We
then choose a preferably unique name for the field type itself, and make
the name end with Bundle. I’ve chosen TweetFieldTypeBundle.

 

.. code:: theme:

    Bundle namespace: EzSystems/TweetFieldTypeBundle<enter>

We must next input the bundle’s name. Nothing exotic here: we
concatenate the vendor’s namespace and the bundle’s namespace, which is
the default. We just hit enter:

.. code:: theme:

    Bundle name [EzSystemsTweetFieldTypeBundle]:<enter>

We are then asked for the target directory. We will begin within the src
folder, but we could (and should !) version it and have it moved to
vendor at some point. Again, this is the default, and we just hit enter.

.. code:: theme:

    Target directory [/home/bertrand/www/ezpublish5/src]:<enter>

We must then specify which format the generation must be generated as.
We will use yml, since it is what we use in eZ Publish 5 itself. Of
course, any other format could have been used.

.. code:: theme:

    Configuration format (yml, xml, php, or annotation): yml<enter>

The generator will then offer us to generate the whole directory
structure for us. Since our bundle isn’t really a standard Symfony full
stack bundle, we decline.

.. code:: theme:

    Do you want to generate the whole directory structure [no]? no<enter>

We then get a summary of what will be generated:

 

.. code:: theme:

    You are going to generate a "EzSystems\TweetFieldTypeBundle\EzSystemsTweetFieldTypeBundle" bundle
    in "/home/bertrand/www/ezpublish5/src/" using the "yml" format.
    Do you confirm generation [yes]?<enter>

After generation, the wizard will offer us to update the kernel with our
bundle (yes please), and to update the app’s routing with our bundle’s
route file (no thanks).

.. code:: theme:

    Generating the bundle code: OK
    Checking that the bundle is autoloaded: OK
    Confirm automatic update of your Kernel [yes]? <enter>
    Enabling the bundle inside the Kernel: OK
    Confirm automatic update of the Routing [yes]? no <enter>

Our bundle should have been generated. Navigate to
src/EzSystems/EzSystemsTweetBundle, and you should see this structure:

.. code:: theme:

    $ ls -l src/EzSystems/TweetFieldTypeBundle
    Controller
    DependencyInjection
    EzSystemsTweetFieldTypeBundle.php
    Resources
    Tests

| 
|  Feel free to delete the Controller folder, since we won’t use it in
this tutorial. It could have been useful had our field type required an
interface of its own.

Comments:
---------

+--------------------------------------------------------------------------+
| it has to be "generate:bundle" not "bundle:generate"                     |
|                                                                          |
| ``php ezpublish``\ ``/console generate:bundle``                          |
|                                                                          |
| |image1| Posted by lugor at Mar 27, 2014 23:12                           |
+--------------------------------------------------------------------------+

Document generated by Confluence on Mar 03, 2015 15:13

.. |image0| image:: images/icons/contenttypes/comment_16.png
.. |image1| image:: images/icons/contenttypes/comment_16.png
