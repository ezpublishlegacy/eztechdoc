#. `eZ Publish Platform 5.x <index.html>`__
#. `eZ Publish Platform
   Documentation <eZ-Publish-Platform-Documentation_1114149.html>`__
#. `Development & Administration Guides <6291674.html>`__
#. `Features <Features_12781009.html>`__
#. `MVC and Application <MVC-and-Application_2719826.html>`__
#. `Configuration <Configuration_2720538.html>`__

eZ Publish Platform 5.x : Logging configuration
===============================================

Created by ricardo.correia@ez.no, last modified by
sarah.haim-lubczanski@ez.no on Nov 17, 2014

-  `Introduction <#Loggingconfiguration-Introduction>`__
-  `Usage example <#Loggingconfiguration-Usageexample>`__

   -  `Error logging and
      rotation <#Loggingconfiguration-Errorloggingandrotation>`__

Introduction
============

The current implementation includes a logging mechanism for debugging
purposes in development environments, which monitors
`Stash <http://stash.tedivm.com/>`__, introduced in
`Stash-bundle <https://github.com/tedivm/TedivmStashBundle>`__, and the
`persistence cache <Persistence-cache-configuration_12781293.html>`__
mechanism.

Logging is enabled by default, except for the production environment to
avoid excessive memory usage on production environments.

 

Usage example
=============

| StashBundle logging, represented by the ``stash.logging`` setting, and
persistence cache logging, represented by the setting
``parameters.ezpublish.spi.persistence.cache.persistenceLogger.enableCallLogging``,
and are both enabled by default on development environments.
| Both settings expect a boolean value (``true`` or ``false``), so, if
you desire to turn off the logging mechanism you can use the following
configuration in ``ezpublish_dev.yml``:

**ezpublish\_dev.yml**

.. code:: theme:

    stash:
        logging: false
        caches:
            default:
                handlers:
                    - FileSystem
                inMemory: false
                registerDoctrineAdapter: false

    parameters:
        ezpublish.spi.persistence.cache.persistenceLogger.enableCallLogging: false

Icon

Be aware that using stash logging and persistence cache logging will
require additional memory. This should be used for debugging purposes
only.

Error logging and rotation
--------------------------

eZ Publish uses the Monolog component to log errors, and it has a
``RotatingFileHandler`` that allows for file rotation.

According to their documentation, it "logs records to a file and creates
one logfile per day. It will also delete files older than
``$maxFiles``".

But then, their own recommendation is to use "``logrotate``\ " instead
of doing the rotation in the handler as you would have better
performance.

 

Icon

More details here:

-  `https://github.com/Seldaek/monolog <https://github.com/Seldaek/monolog>`__
-  `http://linuxcommand.org/man\_pages/logrotate8.html <http://linuxcommand.org/man_pages/logrotate8.html>`__

 

If you decided to use Monolog's handler, it can be configured in
``/ezpublish/config/config.yml``

.. code:: theme:

    monolog:
        handlers:
            main:
                type: rotating_file
                max_files: 10
                path: "%kernel.logs_dir%/%kernel.environment%.log"
                level: debug

Comments:
---------

+--------------------------------------------------------------------------+
| It seems "logging" setting is not working anymore as it was replaced by  |
| "tracking"                                                               |
|                                                                          |
| `https://github.com/tedious/TedivmStashBundle/commit/df48e3b61d489854d39 |
| 473eb1e3a2f1aade9ddd4 <https://github.com/tedious/TedivmStashBundle/comm |
| it/df48e3b61d489854d39473eb1e3a2f1aade9ddd4>`__                          |
|                                                                          |
| Edit: This change will affect eZ community 2014.07 and the following     |
| versions. 2014.05 and before can work with logging. So i guess this      |
| change in doc should be added for 5.4 only.                              |
|                                                                          |
|                                                                          |
|                                                                          |
| |image1| Posted by desorden at Aug 29, 2014 21:34                        |
+--------------------------------------------------------------------------+

Document generated by Confluence on Mar 03, 2015 15:12

.. |image0| image:: images/icons/contenttypes/comment_16.png
.. |image1| image:: images/icons/contenttypes/comment_16.png
