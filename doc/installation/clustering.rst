#. `eZ Publish Platform 5.x <index.html>`__
#. `eZ Publish Platform
   Documentation <eZ-Publish-Platform-Documentation_1114149.html>`__
#. `Installation and Upgrade
   Guides <Installation-and-Upgrade-Guides_6292016.html>`__
#. `Installation <Installation_7438500.html>`__

eZ Publish Platform 5.x : Clustering
====================================

Created and last modified by andre.romcke@ez.no on Jan 15, 2015

Clustering in eZ Publish Platform refers to setting up your install so
you have several web servers running eZ Publish Platform.

Server setup overview
---------------------

|image0|

Diagram illustrates how clustering of eZ Publish Platform is typically
setup, the parts illustrates the different roles needed for a successful
cluster setup. Number of web server, memcached servers, Solr server,
Varnish servers, Database Severs, NFS servers and if some servers takes
care about several roles (typically running memcached across the web
server) does not matter.

The minimal requirements are the following (with what is currently
supported in parentheses):

-  Shared HTTP cache (using Varnish)
-  Shared Persistence cache and Sessions (using Memcached)
-  Shared Database (using MySQL/MariaDB)
-  Shared Filesystem (using NFS)

For further details on requirements, see `Requirements
doc <Requirements_7438502.html>`__.

While this is not a complete list, further recommendations includes:

-  Using a CDN for improved performance and faster ping time worldwide
-  Using Solr for better search and better search performance AS OF 5.3
   OPTIONALLY USING SOLR (4.X) CLOUD
-  Using Active/Passive Database for failover MYSQL/MARIADB CLUSTERING
   UNDER CONSIDERATION FOR 6.X
-  In General: Make sure to use later versions of PHP and MySQL/MariaDB
   within `what is supported <Requirements_7438502.html>`__ for your eZ
   Publish Platform version to get more performance out of each server.

 

 

 

How to setup
------------

To setup Cluster you'll need to:

#. `Setup DFS
   Cluster <https://doc.ez.no/eZ-Publish/Technical-manual/5.x/Features/Clustering/Setting-it-up-for-an-eZDFSFileHandler>`__
   which moves binary files and some *legacy* cache files to NFS
#. `Configure Persistence Cache <Persistence-cache_10158280.html>`__ to
   use Memcached
#. `Setup Varnish <Using-Varnish_12124722.html>`__, disable Symfony HTTP
   Cache and setup cache invalidation to purge Varnish cache
#. `Configure sessions <Session_8323282.html>`__ to use cluster safe
   Sessions handling

 

 

Attachments:
------------

| |image1| `Server setup 5.x
doc.png <attachments/25985700/26378285.png>`__ (image/png)
|  |image2| `Server setup 5.x
doc.png <attachments/25985700/26378284.png>`__ (image/png)
|  |image3| `Server setup.png <attachments/25985700/26902598.png>`__
(image/png)
|  |image4| `Server setup.png <attachments/25985700/26902597.png>`__
(image/png)

Document generated by Confluence on Mar 03, 2015 15:12

.. |image0| image:: attachments/25985700/26902597.png
.. |image1| image:: images/icons/bullet_blue.gif
.. |image2| image:: images/icons/bullet_blue.gif
.. |image3| image:: images/icons/bullet_blue.gif
.. |image4| image:: images/icons/bullet_blue.gif
